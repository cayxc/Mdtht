/*
 * ------------------------------------------------------------------------
 * mdtht.js
 * (c) 2022-2025
 * Author: cayxc
 * Homepage:  https://gitee.com/cayxc/mdtht  https://github.com/cayxc/Mdtht
 * License: BSD-3-Clause
 * ------------------------------------------------------------------------
 */
let objThis;class Mdtht{constructor(e=1,t=!1,n=!0,i=!1,r=!1,s=!0,l=!1,o=!1){try{if("number"!=typeof e||1>e||e>3)throw e=1,new Error("参数: indexStyle 类型有误，已按照默认配置执行，该参数类型为：Number, 1<= Number <=3");if("boolean"!=typeof t)throw t=!1,new Error("参数: firstTagToTitle 类型有误，已按照默认配置执行，该参数类型为：Boolean");if("boolean"!=typeof n)throw n=!1,new Error("参数: titleCenter 类型有误，已按照默认配置执行，该参数类型为：Boolean");if("boolean"!=typeof i)throw i=!0,new Error("参数: showIndex 类型有误，已按照默认配置执行，该参数类型为：Boolean");if("boolean"!=typeof r)throw r=!0,new Error("参数: showTitleIndex 类型有误，已按照默认配置执行，该参数类型为：Boolean");if("boolean"!=typeof s)throw s=!0,new Error("参数: showTree 类型有误，已按照默认配置执行，该参数类型为：Boolean");if("boolean"!=typeof l)throw l=!1,new Error("参数: openShadow 类型有误，已按照默认配置执行，该参数类型为：Boolean");if("boolean"!=typeof o)throw o=!1,new Error("参数: openDark 类型有误，已按照默认配置执行，该参数类型为：Boolean")}catch(e){console.log(e),this.showError(e)}finally{objThis=this,this.showIndex=i,this.indexStyle=e,this.openDark=o,this.openShadow=l,this.showTitleIndex=r,this.showTree=s,this.firstTagToTitle=t,this.titleCenter=n,this.acticleTitle="",this.handleHarr="",null===document.querySelector("#body-container")&&this.replaceOld(),this.bodyContainer=document.querySelector("#body-container"),this.leftElement=document.querySelector("#left-container"),this.rightElement=document.querySelector("#right-container"),this.content=document.querySelector("#content"),this.quitElement=document.querySelector(".quit-menu"),this.listElement=document.querySelector(".list-wrapper"),this.switchButton=document.querySelector("#switch-button"),this.asideButton=document.querySelector(".catalog-button"),this.switchListButton=document.querySelector(".quit-menu"),this.viewModeButton=document.querySelector(".mode"),this.allIcon=this.listElement.children[0].querySelectorAll("i"),this.allChildLevel=this.listElement.children[0].querySelectorAll("ul"),this.allCatalogElement=this.listElement.querySelectorAll("a"),this.showIndexEl=document.querySelector(".index"),this.allIndex=this.listElement.querySelectorAll("p"),this.themeChange(),this.showCatalogIndex(),this.choseCatalogStyle(),this.switchCatalog(),this.switchCatalogList(),this.catalogIconClick(),this.searchCatalog(),this.catalogTrack(),this.internalLinkJump(),this.singleCatalogClick(),this.sidebarResize(),this.printHeaderFooter(),this.codeCopy()}}showError(e){const t=document.createElement("p");t.setAttribute("class","error"),t.innerHTML=`<pre>${e.stack}</pre>`,document.querySelector("body").prepend(t)}noteTips(e,t,n){try{if("string"!=typeof e||"string"!=typeof t||"string"!=typeof n)throw new Error("noteTips() 调用时参数类型错误！");const i=document.createElement(e);i.innerHTML=t,document.getElementById(n).appendChild(i)}catch(e){this.showError(e)}}createContent(){const e=document.body.innerHTML;document.body.innerHTML="",document.documentElement.setAttribute("theme","light"),document.body.style.overflow="hidden";const t=document.createElement("div"),n=document.createElement("aside"),i=document.createElement("section");let r,s;t.id="body-container",n.id="left-container",i.id="right-container",r=this.showIndex?'<i class="iconfont icon-menu-index"></i>':'<i class="iconfont icon-catalog-closeB"></i>',!0===this.openDark&&(s="icon-moon",document.documentElement.setAttribute("theme","dark")),!1===this.openDark&&(s="icon-sun",document.documentElement.setAttribute("theme","light"));let l="";const o=["A","B","C"];for(let e=1,t=3;e<=t;e++)this.indexStyle==e?l+=`<li class="style-chose">\n                <input type="radio" name="style${o[e-1]}" checked="checked" disabled="disabled">\n                <label for="style${o[e-1]}">图标-${o[e-1]}</label>\n            </li>`:l+=`<li class="style-chose">\n                <input type="radio" name="style${o[e-1]}" disabled="disabled">\n                <label for="style${o[e-1]}">图标-${o[e-1]}</label>\n            </li>`;n.innerHTML=`<div id="resize-control" title="按住鼠标拖动调整侧边栏宽度"></div>\n        <header class="top-container">\n            <i class="catalog-button iconfont icon-catalog-show" title="展开/收起侧边栏"></i>\n            <div class="search-container">\n                <input type="text" class="search" name="search" placeholder="输入关键字搜索目录">\n                <i class="search-icon iconfont icon-close"></i>\n            </div>\n            <div class="search-result"></div>\n        </header>\n        <nav id="list-container">\n            <div class="list-wrapper js-launch"></div>\n        </nav>\n        <footer class="bottom-container">\n            <div class="mode-container">\n                <div class="mode" title="亮色/暗色模式">\n                    <i class="iconfont modeStyleClass+'"></i>\n                </div>\n                <div class="index" title="显示/隐藏目录索引编号">${r}</div>\n                <div class="structure" title="风格样式">\n                    <i class="iconfont icon-style"></i>\n                    <ul class="structure-child">\n                        <li>\n                            <input type="radio" id="title-index" name="titleIndex" value="false" disabled="disabled">\n                            <label for="titleIndex">标题索引</label>\n                        </li>\n                        <li>\n                            <input type="radio" id="show-tree" name="showTree" value="true" disabled="disabled">\n                            <label for="showTree">目录树</label>\n                        </li>\n                        <li>\n                            <input type="radio" id="text-shadow" name="textShadow" value="true" disabled="disabled">\n                            <label for="textShadow">阴影效果</label>\n                        </li>\n                        ${l}\n                    </ul>\n                </div>\n                <div class="quit-menu" title="展开/收起全部子目录">\n                    <i class="iconfont icon-quit" value="true"></i>\n                </div>\n            </div>\n        </footer>`,i.innerHTML=`<div id="content">${e}</div></div>`,t.innerHTML='<div id="switch-button">\n            <i class="iconfont icon-label"></i>\n            <i class="iconfont icon-catalog-close"></i>\n        </div>',document.body.appendChild(t),t.appendChild(n),t.appendChild(i);this.noteTips("footer",'<p class="note-tips">&copy; DOCUMENT STYLE CREATED BY Mdtht.&nbsp;ABOUT Mdtht：<a href="https://github.com/cayxc/Mdtht" target="_blank">Github</a>&emsp;<a href="https://gitee.com/cayxc/mdtht" target="_blank">Gitee</a>\n              </p>',"content")}getPrefixIndex(e){try{if("string"!=typeof e)throw new Error("getPrefixIndex() 需要传入一个字符，且如level-1或level-1.2.2的形式");let t,n,i=e.lastIndexOf(".");return-1===i?(n=e.slice(0,e.lastIndexOf("-")+1),t=e.slice(e.lastIndexOf("-")+1)):(n=e.slice(0,i+1),t=e.slice(i+1)),[n,Number(t)]}catch(e){return e}}setTagLevel(){let e=document.querySelectorAll("h1,h2,h3,h4,h5,h6");if(0==e.length)return!1;!0===this.firstTagToTitle&&(this.acticleTitle=e[0],e[0].parentNode.removeChild(e[0]),e=document.querySelectorAll("h1,h2,h3,h4,h5,h6")),this.handleHarr=e;const t=e.length;if(0==t)return!1;if(t>=1){e[0].id="level-1";for(let t=1,n=e.length;t<n;t++)if(this.getTagNumber(e[t])>this.getTagNumber(e[t-1]))e[t].id=e[t-1].id+".1";else if(this.getTagNumber(e[t])!=this.getTagNumber(e[t-1])){if(this.getTagNumber(e[t])<this.getTagNumber(e[t-1]))for(let n=t-1;n>=0;n--){if(this.getTagNumber(e[t])==this.getTagNumber(e[n-1])){e[t].id=this.getPrefixIndex(e[n-1].id)[0]+(this.getPrefixIndex(e[n-1].id)[1]+1);break}if(this.getTagNumber(e[t])>this.getTagNumber(e[n-1])){e[t].id=this.getPrefixIndex(e[t-1].id)[0]+(this.getPrefixIndex(e[t-1].id)[1]+1);break}if(e[t].id=this.getPrefixIndex(e[n].id)[0]+(this.getPrefixIndex(e[n].id)[1]+1),-1===e[n].id.indexOf("."))break}}else e[t].id=this.getPrefixIndex(e[t-1].id)[0]+(this.getPrefixIndex(e[t-1].id)[1]+1);for(let n=0;n<t;n++){const t=document.createElement("span");t.innerHTML=e[n].id.slice(e[n].id.lastIndexOf("-")+1),e[n].prepend(t)}return!0}}getTagNumber(e){try{if("object"!=typeof e)throw new Error("getTagNumber() 调用时参数类型错误，必须是一个h标签的对象集合！");return Number(e.nodeName.slice(1))}catch(e){return e}}findStrFre(e,t){try{if("string"!=typeof e||"string"!=typeof e)throw new Error("findStrFre() 调用时参数类型错误！");let n=0,i=e.indexOf(t);for(;-1!==i;)n++,i=e.indexOf(t,i+1);return n}catch(e){return e}}levelTagArr(e){try{if(e<1||e>6||"number"!=typeof e)throw new Error("levelTagArr() 调用时参数类型错误！");let t=this.handleHarr;const[n,i,r,s,l,o]=[[],[],[],[],[],[]];for(let e=0,c=t.length;e<c;e++){switch(this.findStrFre(t[e].id,".")){case 0:n.push(t[e]);break;case 1:i.push(t[e]);break;case 2:r.push(t[e]);break;case 3:s.push(t[e]);break;case 4:l.push(t[e]);break;case 5:o.push(t[e]);break;default:return}}switch(e){case 1:return n;case 2:return i;case 3:return r;case 4:return s;case 5:return l;case 6:return o;default:return[]}}catch(e){return e}}setLevelNumber(e){try{if("object"!=typeof e)throw new Error("setLevelNumber() 调用时参数类型错误，必须是一个h标签的对象集合！");const t=e.id;if(-1==t.lastIndexOf(".")){return"level-"+(parseInt(t.slice(6))+1)}{const e=t.lastIndexOf(".");return t.slice(0,e)+"."+(parseInt(t.slice(e+1))+1)}}catch(e){return e}}findCeilCatalog(e){try{if("string"!=typeof e)throw new Error("catalogForParent()参数类型错误，参数为string");const t=[];let n=objThis.findStrFre(e,".")+1;if(n>1){const i=objThis.levelTagArr(n-1);if(0==i.length)return[];for(let n=0,r=i.length;n<r;n++){const r=i[n].id;e.slice(0,e.lastIndexOf("."))==r&&t.push(i[n])}}return t}catch(e){return e}}findAllCeilCatalog(e,t=[]){try{if("string"!=typeof e)throw new Error("findAllCeilCatalog() 参数类型错误，参数类型为string");let n=objThis.findCeilCatalog(e);if(n.length>0){let e=n[0].id,i=document.getElementsByClassName(e)[0].parentElement;t.push(i),this.findAllCeilCatalog(e,t)}return t}catch(e){return e}}createCatalogue(){let e=this.setTagLevel(),t=document.querySelector(".list-wrapper"),n=document.createElement("ul");if(!e){let e=document.createElement("div");return e.setAttribute("class","empty-catalog"),e.innerHTML='<i class="iconfont icon-fail"></i><p>哦～～&nbsp;正文中未发现&nbsp;h1~h6&nbsp;标签，无法生成目录</p>',t.appendChild(e),!1}{let e,i;for(let t=1;t<=6;t++)if((e=this.levelTagArr(t)).length>0){e=this.levelTagArr(t),i=t;break}if(e.length>0){for(let i=0,r=e.length;i<r;i++){let r=document.createElement("li");r.innerHTML=`<a class="${e[i].id}" href="#${e[i].id}">\n                <div>\n                    <p>${e[i].id.slice(6)}</p>\n                    <span>${e[i].innerText}</span>\n                </div>\n              </a>`,n.appendChild(r),t.appendChild(n)}const r=["A","B","c"];for(let e=i+1;e<=6;e++){let t=this.levelTagArr(e);if(t.length>0)for(let e=0,n=t.length;e<n;e++){let n=t[e].id,i=n.slice(0,n.lastIndexOf(".")),s=this.findCeilCatalog(n);if(i==s[0].id){let i=document.getElementsByClassName(s[0].id)[0].parentElement,l=document.createElement("li");if(l.innerHTML=`<a class="${n}" href="#${n}">\n                        <div>\n                            <p>${n.slice(6)}</p>\n                            <span>${t[e].innerText}</span>\n                        </div>\n                    </a>`,null===i.querySelector("ul")){let e=document.createElement("ul");e.appendChild(l),i.appendChild(e);let t=document.createElement("i");t.setAttribute("class","iconfont icon-launch"+r[this.indexStyle-1]),i.prepend(t)}else{i.querySelector("ul").appendChild(l)}}}}for(let t=0,n=e.length;t<n;t++){let n=document.getElementsByClassName(e[t].id)[0].parentElement;if("I"!==n.children[0].nodeName){let e=document.createElement("i");e.setAttribute("class","iconfont icon-launch"+r[this.indexStyle-1]),n.prepend(e)}}return!0}}}replaceOld(){this.createContent();let e=this.createCatalogue(),t=document.querySelector("#content");if(e){document.querySelector(".list-wrapper").querySelector("li").classList.add("js-active");let e=this.levelTagArr(1);if(e.length>0){for(let t=0,n=e.length;t<n;t++)e[t].classList.add("js-level1-style");!0===this.firstTagToTitle&&!0===this.titleCenter&&this.acticleTitle.setAttribute("class","text-center")}}t.prepend(this.acticleTitle)}switchCatalog(){let e=this.asideButton,t=this.leftElement,n=this.rightElement,i=this.switchButton;e.addEventListener("click",()=>{t.setAttribute("class","js-width-0"),n.style.marginLeft=0,i.className="js-height-1"}),i.addEventListener("click",()=>{i.style.height=i.className="js-height-0",t.removeAttribute("class"),t.style.display="block"});let r=window.matchMedia("(max-width: 768px)").matches,s=t.classList.contains("js-width-0");r&&!s&&this.rightElement.addEventListener("click",()=>{t.classList.add("js-width-0"),i.className="js-height-1",n.style.marginLeft=0})}changeIcons(e,t=1){try{if("object"!=typeof e)throw new Error("changeIcon() 调用时参数1类型错误，必须为object");if("number"!=typeof t||t>3)throw new Error("changeIcon() 调用时参数2类型错误，必须为number,且小于等于 3");const n=["A","B","C"];for(let i=0,r=e.length;i<r;i++){const r=e[i].getAttribute("class").slice(0,-1)+n[t-1];e[i].setAttribute("class",r)}}catch(e){return e}}changeSingleIcon(e){try{if("object"!=typeof e)throw new Error("changeIcon() 调用时参数1类型错误，该参数为图标元素的容器");const t=e.getAttribute("class");t.includes("launch")&&e.setAttribute("class",t.replace("launch","retract")),t.includes("retract")&&e.setAttribute("class",t.replace("retract","launch"))}catch(e){return e}}switchCatalogList(){const e=this.switchListButton;let t=e.children[0].getAttribute("value");const n=this.allIcon;this.changeSingleIcon;e.addEventListener("click",function(){const e=document.querySelectorAll(".js-item-retract");for(let t=0,n=e.length;t<n;t++)e[t].classList.remove("js-item-retract");const i=document.querySelectorAll(".js-item-launch");for(let e=0,t=i.length;e<t;e++)i[e].classList.remove("js-item-launch");"true"===t?(document.querySelector(".list-wrapper").classList.add("js-retract"),this.children[0].setAttribute("class","iconfont icon-branchB"),this.children[0].setAttribute("value","false"),t="false"):(document.querySelector(".list-wrapper").classList.remove("js-retract"),this.children[0].setAttribute("class","iconfont icon-quit"),this.children[0].setAttribute("value","true"),t="true");for(let e=0,t=n.length;e<t;e++){const t=document.querySelector(".list-wrapper").getAttribute("class"),i=n[e].getAttribute("class");if(t.includes("js-retract")?(n[e].setAttribute("class","iconfont icon-retract"+i.slice(-1)),document.querySelector(".list-wrapper").setAttribute("class","list-wrapper js-retract")):(n[e].setAttribute("class","iconfont icon-launch"+i.slice(-1)),document.querySelector(".list-wrapper").setAttribute("class","list-wrapper js-launch")),"A"==n[e].parentElement.lastElementChild.nodeName){const t=n[e].getAttribute("class");n[e].setAttribute("class",t.replace("retract","launch"))}}})}catalogIconClick(){const e=document.querySelector(".list-wrapper").querySelectorAll("i"),t=this.changeSingleIcon;for(let n=0,i=e.length;n<i;n++)e[n].addEventListener("click",i=>{if((i=i||window.event).stopPropagation(),i.preventDefault(),"UL"===e[n].parentElement.lastElementChild.nodeName){t(e[n]),e[n].getAttribute("class").includes("launch")?(e[n].parentElement.classList.add("js-item-launch"),e[n].parentElement.classList.remove("js-item-retract")):(e[n].parentElement.classList.add("js-item-retract"),e[n].parentElement.classList.remove("js-item-launch"))}})}singleCatalogClick(){const e=this.rightElement,t=document.querySelectorAll(".list-wrapper a");for(let n=0,i=t.length;n<i;n++)t[n].addEventListener("click",function(i){(i=i||window.event).stopPropagation(),i.preventDefault();let r=t[n].getAttribute("href").slice(1);e.scrollTo({top:document.getElementById(r).offsetTop-10})})}themeChange(){const e=document.documentElement,t=this.viewModeButton;!0===this.openDark?(e.setAttribute("theme","dark"),t.children[0].setAttribute("class","iconfont icon-moon")):(e.setAttribute("theme","light"),t.children[0].setAttribute("class","iconfont icon-sun")),t.addEventListener("click",function(){const t=e.getAttribute("theme");"light"==t&&(this.children[0].setAttribute("class","iconfont icon-moon"),e.setAttribute("theme","dark")),"dark"==t&&(this.children[0].setAttribute("class","iconfont icon-sun"),e.setAttribute("theme","light"))}),matchMedia("(prefers-color-scheme: dark)").matches?(this.openDark=!0,t.children[0].setAttribute("class","iconfont icon-moon"),e.setAttribute("theme","dark")):(this.openDark=!1,t.children[0].setAttribute("class","iconfont icon-sun"),e.setAttribute("theme","light")),matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?(this.openDark=!0,t.children[0].setAttribute("class","iconfont icon-moon"),document.documentElement.setAttribute("theme","dark")):(this.openDark=!1,t.children[0].setAttribute("class","iconfont icon-sun"),document.documentElement.setAttribute("theme","light"))})}showCatalogIndex(){this.indexStyle;const e=document.querySelector("#list-container"),t=document.querySelector(".index");!1===this.showIndex?(e.classList.add("js-noindex"),t.children[0].setAttribute("class","iconfont icon-catalog-closeB")):(e.classList.remove("js-noindex"),t.children[0].setAttribute("class","iconfont icon-menu-index"));let n=this.showIndex;t.addEventListener("click",()=>{!1===n?(e.classList.remove("js-noindex"),t.children[0].setAttribute("class","iconfont icon-menu-index"),n=!0):(e.classList.add("js-noindex"),t.children[0].setAttribute("class","iconfont icon-catalog-closeB"),n=!1)})}choseCatalogStyle(){const e=document.querySelectorAll(".style-chose"),t=this.allIcon,n=this.changeIcons;n(t,this.indexStyle);for(let i=0,r=e.length;i<r;i++)e[i].addEventListener("click",function(){n(t,i+1);for(let t=0,n=e.length;t<n;t++)e[t].children[0].removeAttribute("checked");this.children[0].setAttribute("checked","checked")});const i=document.querySelector('[name="textShadow"]').parentElement;i.addEventListener("click",function(){document.querySelector("body").classList.contains("js-show-shadow")?(document.querySelector("body").setAttribute("class","js-close-shadow"),this.children[0].removeAttribute("checked")):(document.querySelector("body").setAttribute("class","js-show-shadow"),this.children[0].setAttribute("checked","checked"))}),!0===this.openShadow?(document.querySelector("body").setAttribute("class","js-show-shadow"),i.children[0].setAttribute("checked","checked")):(document.querySelector("body").setAttribute("class","js-close-shadow"),i.children[0].removeAttribute("checked"));const r=document.querySelector('[name="showTree"]').parentElement;r.addEventListener("click",function(){document.querySelector("#body-container").classList.contains("js-show-tree")?(document.querySelector("#body-container").setAttribute("class","js-close-tree"),this.children[0].removeAttribute("checked")):(document.querySelector("#body-container").setAttribute("class","js-show-tree"),this.children[0].setAttribute("checked","checked"))}),!0===this.showTree?(document.querySelector("#body-container").setAttribute("class","js-show-tree"),r.children[0].setAttribute("checked","checked")):(document.querySelector("#body-container").setAttribute("class","js-close-tree"),r.children[0].removeAttribute("checked"));const s=document.querySelector("#content"),l=document.querySelector('[name="titleIndex"]').parentElement,o=document.getElementById("title-index");l.addEventListener("click",function(){"true"==o.value?(s.classList.remove("js-show"),o.removeAttribute("checked"),o.value="false"):(s.classList.add("js-show"),o.setAttribute("checked","checked"),o.value="true")}),!1===this.showTitleIndex?(s.classList.remove("js-show"),o.removeAttribute("checked"),o.value="false"):(s.classList.add("js-show"),o.setAttribute("checked","checked"),o.value="true")}debounce(e,t=500){try{if("function"!=typeof e)throw new Error("fun 参数必须是一个函数");if("number"!=typeof t||t<0)throw new Error("t 参数必须是 >0 的整数");let n;return this.t=t,function(){n&&clearTimeout(n),n=setTimeout(function(){e()},t)}}catch(e){this.showError(e)}}throttle(e,t=500){try{if("function"!=typeof e)throw new Error("fun 参数必须是一个函数");if("number"!=typeof t||t<0)throw new Error("t 参数必须是 >0 的整数");this.t=t;let n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}catch(e){this.showError(e)}}comparison(e){try{if("string"!=typeof e)throw new Error("comparison() 参数必须是一个字符串");e=e.toLowerCase();let t="",n=this.allCatalogElement;for(let i=0,r=n.length;i<r;i++){if(-1!=n[i].innerText.replace(/\s+/g,"").toLowerCase().indexOf(e)){t+='<a href="'+n[i].getAttribute("href")+'">'+n[i].innerText+"</a>"}}return""==t&&(t='<div><i class="iconfont icon-search"></i>\n<span>目录中暂无相关搜索结果</span><span>试试 Ctrl+F  在全文搜索</span></div>'),t}catch(e){this.showError(e)}}searchCatalog(){const e=document.querySelector(".search"),t=document.querySelector(".search-result"),n=e.nextElementSibling,i=this.rightElement;e.addEventListener("keyup",this.debounce(()=>{let r=e.value.replace(/\s+/g,"");if(r){t.classList.add("js-search"),n.style.display="block";let e=objThis.comparison(r);t.innerHTML="<nav>"+e+"</nav>",document.querySelector(".search-result nav").addEventListener("click",function(e){"A"===(e=e||window.event).target.nodeName&&(e.preventDefault(),i.scrollTo({top:document.getElementById(e.target.href.slice(e.target.href.indexOf("#")+1)).offsetTop-10}),e.target.setAttribute("class","search-click"))})}else n.style.display="none",t.classList.remove("js-search")},500)),n.addEventListener("click",function(){this.style.display="none",t.classList.remove("js-search"),e.value=""})}catalogTrack(){const e=this.handleHarr,t=this.rightElement,n=document.querySelectorAll(".list-wrapper li"),i=[];for(let t=0,n=e.length;t<n;t++)i.push(e[t].offsetTop);t.addEventListener("scroll",this.throttle(function(){let i=t.scrollTop;for(let t=0,r=e.length;t<r;t++)if(i+32>e[t].offsetTop){const e=document.querySelectorAll(".js-active");for(let t=0,n=e.length;t<n;t++)e[t].classList.remove("js-active");if(n[t].setAttribute("class","js-active js-item-launch"),"I"===n[t].children[0].nodeName){const e=n[t].children[0].getAttribute("class");n[t].children[0].setAttribute("class",e.replace("retract","launch"))}const i=n[t].querySelector("a").getAttribute("class"),r=objThis.findAllCeilCatalog(i);if(r.length>0)for(let e=0,t=r.length;e<t;e++)r[e].setAttribute("class","js-active js-item-launch")}else if(n[t].setAttribute("class","js-item-retract"),"I"===n[t].children[0].nodeName&&"UL"===n[t].lastChild.nodeName){const e=n[t].children[0].getAttribute("class");n[t].children[0].setAttribute("class",e.replace("launch","retract"))}if(i+32<=e[0].offsetTop&&(n[0].setAttribute("class","js-active js-item-retract"),"I"===n[0].children[0].nodeName&&"UL"===n[0].lastChild.nodeName)){const e=n[0].children[0].getAttribute("class");n[0].children[0].setAttribute("class",e.replace("launch","retract"))}const r=document.querySelectorAll(".js-active"),s=r[r.length-1],l=document.querySelector("#list-container").clientHeight;document.querySelector(".list-wrapper ul").clientHeight>l&&s.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},500))}internalLinkJump(){document.querySelector("#content").addEventListener("click",e=>{if("A"===(e=e||window.event).target.nodeName){const t=e.target.getAttribute("href"),n=document.getElementById(t.slice(1));null!==t&&null!==n&&(e.preventDefault(),document.getElementById(t.slice(1)).scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}));const i=e.target.getAttribute("name");null!==i&&(e.preventDefault(),document.querySelector('[href="#'+i+'"]').scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}))}})}sidebarResize(){const e=document.querySelector("#resize-control"),t=this.leftElement,n=this.rightElement;let i,r=Math.floor(.6*window.innerWidth);e.onmousedown=function(){document.onmousemove=function(s){s=s||window.event,i=s.clientX,e.style.left=i-2+"px",t.style.width=i+"px",n.style.marginLeft=i+"px",i<=160&&(e.style.left="158px",t.style.width="160px",n.style.marginLeft="160px"),i>r&&(e.style.left=r-2+"px",t.style.width=r+"px",n.style.marginLeft=r+"px")}},e.onmouseup=function(){document.onmousemove=null},document.onmouseup=function(){document.onmousemove=null}}printHeaderFooter(){const e=decodeURIComponent(window.location.href.split("/").slice(-1)[0]),t=document.createElement("style");t.innerHTML=`@media print{\n      @page {\n        size: auto;\n        margin: 15mm !important;\n        background: white;\n        /*谷歌浏览器打印设置*/\n        @top-center {\n          content: "${e}";\n          font-size: 9pt;\n          color: #666\n        }\n        @bottom-center {\n          content: counter(page) '/' counter(pages);\n          font-size: 9pt;\n          color: #666\n        }\n      }\n    }`,document.querySelector("head").appendChild(t)}modifyFont(e,t="monospace"){if(!(arguments.length<1))try{if("string"!=typeof e)throw new Error("modifyFont()调用时参数类型错误，参数1必须为字符串");if("string"!=typeof t)throw new Error("modifyFont()调用时参数类型错误，参数2必须为字符串");const n=document.querySelector("head");let i=document.createElement("style"),r='"PingFang SC", Helvetica, "Helvetica Neue", "Microsoft YaHei", Arial, sans-serif !important';if(""!==e&&(i.innerHTML=`:root{font-family: "${e}", ${r};}`),"default"===e&&(i.innerHTML=`:root{font-family: ${r};}`),""!==t){let e=i.innerHTML;i.innerHTML=`${e} code, pre{font-family: "${t}" !important;}`}n.append(i)}catch(e){this.showError(e)}}codeCopy(){const e=document.querySelectorAll("#content>pre");for(let t=0,n=e.length;t<n;t++)""!==e[t].innerText.trim()&&(e[t].innerHTML+='<span class="code-copy" title="复制">copy</span>',e[t].querySelector(".code-copy").addEventListener("click",function(){let n=e[t].children[0].innerText;navigator.clipboard.writeText(n).then(function(){let n=document.querySelectorAll(".code-copied");for(let e=0,t=n.length;e<t;e++)n[e].innerHTML="copy",n[e].setAttribute("class","code-copy"),n[e].setAttribute("title","复制");e[t].children[1].innerHTML="copied",e[t].children[1].setAttribute("class","code-copy code-copied"),e[t].children[1].setAttribute("title","复制成功")}).catch(function(n){e[t].children[1].setAttribute("title","复制失败"),alert("复制失败:"+n)})}))}}window.addEventListener("DOMContentLoaded",()=>{new Mdtht});